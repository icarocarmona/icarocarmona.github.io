<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZC Analytics — Consultoria em IA e Soluções Inteligentes</title>
    <meta name="description" content="Transforme seu negócio com Inteligência Artificial e Engenharia de Dados. Consultoria especializada da ZC Analytics.">
    
    <!-- Configuração do Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        indigo: {
                            400: '#818cf8',
                            600: '#4f46e5',
                            700: '#4338ca',
                            900: '#312e81',
                        },
                        fuchsia: {
                            500: '#d946ef',
                        }
                    },
                    animation: {
                        'blob': 'blob 10s infinite',
                        'gradient-x': 'gradient-x 5s ease infinite',
                    },
                    keyframes: {
                        blob: {
                            '0%': { transform: 'translate(0px, 0px) scale(1)' },
                            '33%': { transform: 'translate(50px, -70px) scale(1.2)' },
                            '66%': { transform: 'translate(-30px, 50px) scale(0.9)' },
                            '100%': { transform: 'translate(0px, 0px) scale(1)' },
                        },
                        'gradient-x': {
                            '0%, 100%': { 'background-size': '200% 200%', 'background-position': 'left center' },
                            '50%': { 'background-size': '200% 200%', 'background-position': 'right center' },
                        },
                    },
                }
            }
        }
    </script>

    <!-- Configuração dos Ícones Lucide -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Fontes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        /* --- Estilos Globais e Utilitários --- */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8f9fb;
            color: #1f2937; /* Gray-900 para melhor contraste */
        }

        /* Padrão de fundo sutil estilo "Tech Grid" */
        .bg-tech-pattern {
            background-image: radial-gradient(rgba(79, 70, 229, 0.08) 1px, transparent 1px);
            background-size: 24px 24px;
        }

        /* --- Tipografia Futurista --- */
        /* Cria um texto com gradiente que se move */
        .text-gradient-futuristic {
            background: linear-gradient(135deg, #4f46e5, #d946ef, #4f46e5);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient-x 5s linear infinite;
        }

        /* --- Animações e Efeitos --- */
        /* Efeito de subida e brilho nos cards */
        .card-hover-effect {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .card-hover-effect:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 25px -5px rgba(79, 70, 229, 0.15), 0 8px 10px -6px rgba(79, 70, 229, 0.1);
            border-color: rgba(99, 102, 241, 0.4); /* Indigo-400 com transparência */
        }

        /* Efeito de brilho pulsante nos botões principais ao passar o mouse */
        .btn-glow:hover {
            box-shadow: 0 0 20px rgba(79, 70, 229, 0.6);
        }

        /* Utilitário para textarea */
        #challenge-input { resize: none; }

        /* Utilitário para esconder a barra de rolagem horizontal em telas pequenas se necessário */
        body { overflow-x: hidden; }

        /* --- SCROLL REVEAL ANIMATION --- */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: all 1s cubic-bezier(0.5, 0, 0, 1);
        }

        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }

        /* Atrasos escalonados para elementos em grupo (ex: cards) */
        .delay-100 { transition-delay: 0.1s; }
        .delay-200 { transition-delay: 0.2s; }
        .delay-300 { transition-delay: 0.3s; }
    </style>
</head>

<body class="antialiased bg-tech-pattern">

    <!-- 1. Header (Fixo com efeito de vidro sutil) -->
    <header class="fixed w-full top-0 z-50 bg-white/90 backdrop-blur-md shadow-sm border-b border-gray-100 transition-all duration-300">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between">
            <a href="#" class="flex items-center space-x-2 group">
                 <div class="bg-indigo-600 p-1.5 rounded-lg group-hover:rotate-12 transition-transform">
                    <i data-lucide="cpu" class="w-5 h-5 text-white"></i>
                 </div>
                <h1 class="text-2xl font-extrabold tracking-tight text-gray-900">
                    ZC <span class="text-indigo-600">Analytics</span>
                </h1>
            </a>
            <nav class="space-x-8 hidden md:flex items-center font-medium">
                <a href="#servicos" class="text-gray-600 hover:text-indigo-600 transition relative after:absolute after:bg-indigo-600 after:h-0.5 after:w-0 after:left-0 after:-bottom-1 after:transition-all hover:after:w-full">Serviços</a>
                <a href="#abordagem" class="text-gray-600 hover:text-indigo-600 transition relative after:absolute after:bg-indigo-600 after:h-0.5 after:w-0 after:left-0 after:-bottom-1 after:transition-all hover:after:w-full">Abordagem</a>
            </nav>
            <a href="#contato" class="hidden md:inline-flex bg-indigo-600 text-white px-5 py-2.5 rounded-lg text-sm font-semibold hover:bg-indigo-700 transition shadow-md hover:shadow-indigo-500/30 items-center space-x-2">
                <span>Fale Conosco</span>
                <i data-lucide="arrow-up-right" class="w-4 h-4"></i>
            </a>
             <!-- Mobile Menu Button (Simplificado para demonstração) -->
             <button class="md:hidden text-gray-600 p-2">
                 <i data-lucide="menu" class="w-6 h-6"></i>
             </button>
        </div>
    </header>

    <main class="pt-20">
        <!-- 2. Hero Section (Futurista e Animado) -->
        <section class="relative pt-20 pb-32 overflow-hidden">
            <!-- Camada de Fundo Animada -->
            <div class="absolute inset-0 -z-10 overflow-hidden bg-gray-50">
                <!-- Orbes de luz que flutuam -->
                <div class="absolute top-0 -left-40 w-96 h-96 bg-indigo-400 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob"></div>
                <div class="absolute top-40 -right-20 w-96 h-96 bg-fuchsia-500 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-2000"></div>
                <div class="absolute -bottom-40 left-40 w-96 h-96 bg-indigo-600 rounded-full mix-blend-multiply filter blur-3xl opacity-20 animate-blob animation-delay-4000"></div>
                <div class="absolute inset-0 bg-tech-pattern opacity-50"></div>
            </div>

            <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
                <div class="reveal inline-flex items-center space-x-2 bg-indigo-50 border border-indigo-100 rounded-full px-4 py-1.5 mb-6 shadow-sm">
                    <span class="relative flex h-2.5 w-2.5">
                        <span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-indigo-400 opacity-75"></span>
                        <span class="relative inline-flex rounded-full h-2.5 w-2.5 bg-indigo-600"></span>
                    </span>
                    <p class="text-indigo-700 font-semibold text-sm uppercase tracking-wide">O Futuro da Estratégia é Agora</p>
                </div>
                
                <h2 class="reveal delay-100 text-5xl md:text-7xl font-extrabold text-gray-900 leading-tight mb-6 tracking-tight">
                    Seu Parceiro em <br class="hidden md:block">
                    <!-- Aplicação do Texto com Gradiente Animado -->
                    <span class="text-gradient-futuristic">IA e Soluções Inteligentes</span>
                </h2>
                
                <p class="reveal delay-200 text-xl md:text-2xl text-gray-600 max-w-3xl mx-auto mb-12 leading-relaxed">
                    Transformamos dados brutos em vantagem competitiva. Desenvolvemos agentes autônomos e ecossistemas de IA Generativa que redefinem a eficiência do seu negócio.
                </p>
                
                <div class="reveal delay-300 flex flex-col sm:flex-row justify-center items-center space-y-4 sm:space-y-0 sm:space-x-6">
                    <!-- Link redirecionado para 'servicos' já que insights está desativado -->
                    <a href="#servicos" class="btn-glow w-full sm:w-auto bg-indigo-600 text-white text-lg font-bold px-8 py-4 rounded-xl shadow-xl hover:bg-indigo-700 transition duration-300 transform hover:-translate-y-1 inline-flex items-center justify-center space-x-2">
                        <span>Conhecer Serviços</span>
                        <i data-lucide="arrow-right" class="w-5 h-5"></i>
                    </a>
                    <a href="#contato" class="w-full sm:w-auto bg-white text-indigo-700 text-lg font-bold px-8 py-4 rounded-xl shadow-md border border-indigo-100 hover:border-indigo-300 hover:bg-indigo-50 transition duration-300 transform hover:-translate-y-1 inline-flex items-center justify-center space-x-2">
                        <span>Agendar Consultoria</span>
                        <i data-lucide="calendar" class="w-5 h-5"></i>
                    </a>
                </div>
            </div>
            
            <!-- Elemento decorativo de "onda" na parte inferior -->
            <div class="absolute bottom-0 left-0 right-0">
                <svg class="fill-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 120">
                    <path fill-opacity="1" d="M0,64L80,69.3C160,75,320,85,480,80C640,75,800,53,960,48C1120,43,1280,53,1360,58.7L1440,64L1440,320L1360,320C1280,320,1120,320,960,320C800,320,640,320,480,320C320,320,160,320,80,320L0,320Z"></path>
                </svg>
            </div>
        </section>

        <!-- 3. Serviços (Cards Melhorados) -->
        <section id="servicos" class="py-24 bg-white relative z-10">
            <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <h3 class="reveal text-4xl font-extrabold text-gray-900 mb-4">Nossos Serviços Especializados</h3>
                <p class="reveal delay-100 text-lg text-gray-600 max-w-3xl mx-auto mb-16">Fusão de engenharia robusta e IA de ponta para entregar valor real e mensurável.</p>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Card 1 -->
                    <div class="reveal delay-100 card-hover-effect bg-white p-8 rounded-2xl border border-gray-100 shadow-lg text-left relative overflow-hidden group">
                        <div class="absolute inset-0 bg-gradient-to-br from-indigo-50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-2xl"></div>
                        <div class="relative z-10">
                            <div class="p-3 w-14 h-14 rounded-xl bg-indigo-600 text-white shadow-indigo-200 shadow-md mb-6 flex items-center justify-center">
                                <i data-lucide="brain-circuit" class="w-7 h-7"></i>
                            </div>
                            <h4 class="text-2xl font-bold text-gray-900 mb-3">Consultoria em Dados e IA</h4>
                            <p class="text-gray-600 leading-relaxed">Arquitetura moderna, pipelines otimizados e governança estratégica para alavancar sua tomada de decisão.</p>
                        </div>
                    </div>

                    <!-- Card 2 -->
                    <div class="reveal delay-200 card-hover-effect bg-white p-8 rounded-2xl border border-gray-100 shadow-lg text-left relative overflow-hidden group">
                        <div class="absolute inset-0 bg-gradient-to-br from-fuchsia-50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-2xl"></div>
                         <div class="relative z-10">
                            <div class="p-3 w-14 h-14 rounded-xl bg-fuchsia-600 text-white shadow-fuchsia-200 shadow-md mb-6 flex items-center justify-center">
                                <i data-lucide="bot" class="w-7 h-7"></i>
                            </div>
                            <h4 class="text-2xl font-bold text-gray-900 mb-3">Agentes Inteligentes (GenAI)</h4>
                            <p class="text-gray-600 leading-relaxed">Desenvolvimento de agentes autônomos e assistentes personalizados usando LLMs de última geração.</p>
                        </div>
                    </div>

                    <!-- Card 3 -->
                    <div class="reveal delay-300 card-hover-effect bg-white p-8 rounded-2xl border border-gray-100 shadow-lg text-left relative overflow-hidden group">
                        <div class="absolute inset-0 bg-gradient-to-br from-indigo-50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-2xl"></div>
                         <div class="relative z-10">
                            <div class="p-3 w-14 h-14 rounded-xl bg-indigo-900 text-white shadow-indigo-200 shadow-md mb-6 flex items-center justify-center">
                                <i data-lucide="rocket" class="w-7 h-7"></i>
                            </div>
                            <h4 class="text-2xl font-bold text-gray-900 mb-3">Soluções Customizadas</h4>
                            <p class="text-gray-600 leading-relaxed">Aplicações sob medida que automatizam processos críticos, aumentando eficiência e reduzindo custos operacionais.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 4. Nossa Abordagem (Visual mais limpo) -->
        <section id="abordagem" class="py-24 bg-gray-50 relative overflow-hidden">
             <div class="absolute inset-0 bg-tech-pattern opacity-30"></div>
            <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">
                    <div class="lg:order-2">
                        <div class="reveal inline-flex items-center space-x-2 bg-white border border-indigo-100 rounded-full px-4 py-1.5 mb-6 shadow-sm">
                            <i data-lucide="target" class="w-4 h-4 text-indigo-600"></i>
                            <p class="text-indigo-700 font-semibold text-sm uppercase tracking-wide">Nosso DNA</p>
                        </div>
                        <h3 class="reveal delay-100 text-4xl font-extrabold text-gray-900 mb-6">Engenharia + Inteligência</h3>
                        <p class="reveal delay-200 text-lg text-gray-700 mb-8 leading-relaxed">
                            A <strong class="text-indigo-700">ZC Analytics</strong> não entrega apenas modelos; entregamos resultados. Unimos a robustez da engenharia de dados com a inovação da IA para criar soluções <strong>escaláveis e de alto impacto</strong>.
                        </p>
                        <ul class="space-y-5 text-gray-700 font-medium">
                            <li class="reveal delay-300 flex items-start space-x-4 p-4 rounded-xl bg-white shadow-sm border border-gray-100 hover:border-indigo-200 transition">
                                <div class="flex-shrink-0 mt-1 bg-indigo-100 p-1 rounded-full">
                                     <i data-lucide="check" class="w-5 h-5 text-indigo-600"></i>
                                </div>
                                <span>Foco obsessivo em Geração de Valor Estratégico.</span>
                            </li>
                             <li class="reveal delay-300 flex items-start space-x-4 p-4 rounded-xl bg-white shadow-sm border border-gray-100 hover:border-indigo-200 transition">
                                <div class="flex-shrink-0 mt-1 bg-indigo-100 p-1 rounded-full">
                                     <i data-lucide="check" class="w-5 h-5 text-indigo-600"></i>
                                </div>
                                <span>Soluções 100% Baseadas em Dados (Data-Driven).</span>
                            </li>
                             <li class="reveal delay-300 flex items-start space-x-4 p-4 rounded-xl bg-white shadow-sm border border-gray-100 hover:border-indigo-200 transition">
                                <div class="flex-shrink-0 mt-1 bg-indigo-100 p-1 rounded-full">
                                     <i data-lucide="check" class="w-5 h-5 text-indigo-600"></i>
                                </div>
                                <span>Metodologia Ágil, Transparente e Colaborativa.</span>
                            </li>
                        </ul>
                    </div>
                    
                    <!-- Imagem Placeholder com efeito de borda -->
                    <div class="reveal delay-200 lg:order-1 hidden lg:block relative group perspective-1000">
                        <!-- Glow Effect Behind -->
                        <div class="absolute -inset-4 bg-gradient-to-r from-indigo-500 to-fuchsia-500 rounded-3xl opacity-20 blur-lg group-hover:opacity-40 transition duration-500 animate-pulse"></div>
                        
                        <!-- Container da Animação (Substituindo a imagem) -->
                        <div class="relative w-full h-[500px] bg-slate-900 rounded-3xl shadow-2xl overflow-hidden border border-slate-700 flex flex-col">
                            
                            <!-- Fundo Grid Tech -->
                            <div class="absolute inset-0 opacity-20" 
                                 style="background-image: linear-gradient(#4f46e5 1px, transparent 1px), linear-gradient(to right, #4f46e5 1px, transparent 1px); background-size: 40px 40px;">
                            </div>

                            <!-- Orbs de Fundo -->
                            <div class="absolute top-0 right-0 w-64 h-64 bg-indigo-600 rounded-full mix-blend-screen filter blur-[80px] opacity-20 animate-blob"></div>
                            <div class="absolute bottom-0 left-0 w-64 h-64 bg-fuchsia-600 rounded-full mix-blend-screen filter blur-[80px] opacity-20 animate-blob animation-delay-2000"></div>

                            <!-- Interface Principal -->
                            <div class="relative z-10 w-full h-full p-8 flex flex-col justify-between">
                                
                                <!-- Header da Interface -->
                                <div class="flex justify-between items-center border-b border-slate-700 pb-4">
                                    <div class="flex space-x-2">
                                        <div class="w-3 h-3 rounded-full bg-red-500"></div>
                                        <div class="w-3 h-3 rounded-full bg-yellow-500"></div>
                                        <div class="w-3 h-3 rounded-full bg-green-500"></div>
                                    </div>
                                    <div class="text-xs font-mono text-indigo-400 tracking-widest">ZC-CORE SYSTEM v2.0</div>
                                </div>

                                <!-- Conteúdo Central Animado -->
                                <div class="flex-1 flex items-center justify-center relative">
                                    
                                    <!-- Círculos Orbitais -->
                                    <div class="absolute w-64 h-64 border border-indigo-500/30 rounded-full animate-[spin_10s_linear_infinite]"></div>
                                    <div class="absolute w-48 h-48 border border-fuchsia-500/30 rounded-full animate-[spin_15s_linear_infinite_reverse]"></div>
                                    
                                    <!-- Núcleo Central -->
                                    <div class="relative z-20 bg-slate-800/80 backdrop-blur-md p-6 rounded-full border border-indigo-500 shadow-[0_0_30px_rgba(79,70,229,0.3)]">
                                        <i data-lucide="cpu" class="w-12 h-12 text-indigo-400 animate-pulse"></i>
                                    </div>

                                    <!-- Cards Flutuantes (Dados) -->
                                    <!-- Card 1 -->
                                    <div class="absolute top-10 right-10 bg-slate-800/90 p-3 rounded-lg border border-slate-600 shadow-lg animate-[bounce_3s_infinite] backdrop-blur-sm w-32">
                                        <div class="text-[10px] text-slate-400 mb-1">Eficiência</div>
                                        <div class="h-1.5 w-full bg-slate-700 rounded-full overflow-hidden">
                                            <div class="h-full bg-green-500 w-[92%] rounded-full animate-[pulse_2s_infinite]"></div>
                                        </div>
                                        <div class="text-right text-xs text-green-400 font-mono mt-1">98.4%</div>
                                    </div>

                                    <!-- Card 2 -->
                                    <div class="absolute bottom-16 left-10 bg-slate-800/90 p-3 rounded-lg border border-slate-600 shadow-lg animate-[bounce_4s_infinite] backdrop-blur-sm w-40 animation-delay-2000">
                                        <div class="text-[10px] text-slate-400 mb-1">Processamento Neural</div>
                                        <div class="flex items-end space-x-1 h-6 mt-1">
                                            <div class="w-1 bg-indigo-500 h-[40%] animate-[pulse_1s_infinite]"></div>
                                            <div class="w-1 bg-indigo-500 h-[70%] animate-[pulse_1.2s_infinite]"></div>
                                            <div class="w-1 bg-indigo-500 h-[50%] animate-[pulse_0.8s_infinite]"></div>
                                            <div class="w-1 bg-indigo-500 h-[100%] animate-[pulse_1.5s_infinite]"></div>
                                            <div class="w-1 bg-indigo-500 h-[60%] animate-[pulse_1.1s_infinite]"></div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Footer da Interface (Log de Código) -->
                                <div class="font-mono text-[10px] text-slate-500 space-y-1 opacity-70">
                                    <div class="typing-effect">> Initializing neural weights...</div>
                                    <div class="text-indigo-400">> Optimization complete.</div>
                                    <div>> Ready for strategic deployment_</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 6. Contato (Chamada Final Otimizada) -->
        <section id="contato" class="py-24 relative overflow-hidden bg-white">
             <div class="absolute inset-0 bg-tech-pattern opacity-50"></div>
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
                <div class="reveal bg-gradient-to-br from-indigo-600 to-indigo-800 p-12 rounded-3xl shadow-2xl text-white relative overflow-hidden">
                     <!-- Círculos decorativos -->
                    <div class="absolute top-0 right-0 -mt-20 -mr-20 w-64 h-64 bg-white opacity-10 rounded-full filter blur-2xl"></div>
                    <div class="absolute bottom-0 left-0 -mb-20 -ml-20 w-64 h-64 bg-fuchsia-500 opacity-20 rounded-full filter blur-2xl"></div>

                    <h3 class="text-4xl font-extrabold mb-6 relative">Pronto para o Próximo Nível?</h3>
                    <p class="text-xl text-indigo-100 mb-10 relative leading-relaxed">
                        Não deixe sua empresa ficar para trás na era da IA. Agende uma avaliação estratégica gratuita e descubra oportunidades ocultas nos seus dados.
                    </p>
                    <a href="https://forms.gle/ohhMiPvYbQCcjwA36" target="_blank"
                        class="btn-glow relative bg-white text-indigo-700 text-xl font-bold px-10 py-5 rounded-2xl shadow-xl hover:bg-indigo-50 transition duration-300 transform hover:-translate-y-1 inline-flex items-center space-x-3">
                        <span>Agendar Conversa Estratégica</span>
                         <i data-lucide="calendar-check-2" class="w-6 h-6"></i>
                    </a>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="text-center py-8 bg-gray-50 border-t border-gray-200 relative">
         <div class="absolute inset-0 bg-tech-pattern opacity-30"></div>
        <div class="max-w-6xl mx-auto px-4 relative z-10">
             <div class="mb-4 flex items-center justify-center space-x-2 text-gray-400">
                <i data-lucide="cpu" class="w-5 h-5"></i>
                 <span class="font-bold text-gray-600">ZC Analytics</span>
             </div>
            <p class="text-sm text-gray-500 mb-4">
                © 2025 ZC Analytics — Inteligência com Propósito.
            </p>
            <div class="flex justify-center space-x-6 text-sm text-gray-400">
                <a href="#" class="hover:text-indigo-600 transition underline-offset-4 hover:underline">Política de Privacidade</a>
                <a href="#" class="hover:text-indigo-600 transition underline-offset-4 hover:underline">Termos de Uso</a>
            </div>
        </div>
    </footer>

    <!-- Adicionando keyframes para o efeito shimmer no CSS -->
    <style>
        @keyframes shimmer {
            100% { top: 0; left: 100%; }
        }
    </style>

    <script>
        // Inicialização de variáveis globais do Canvas
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        const MODEL_NAME = 'gemini-2.5-flash-preview-05-20';
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/${MODEL_NAME}:generateContent?key=`;
        const API_KEY = ""; // Será preenchida pelo Canvas em tempo de execução

        // --- 1. Utility Functions ---

        /**
         * Realiza uma chamada de fetch com retentativas e backoff exponencial.
         */
        async function exponentialBackoffFetch(url, options, maxRetries = 3) {
            for (let i = 0; i < maxRetries; i++) {
                try {
                    const response = await fetch(url + API_KEY, options);
                    if (response.ok) return response;
                    if (response.status === 429 || response.status >= 500) {
                        const delay = Math.pow(2, i) * 800 + Math.random() * 500;
                         console.warn(`Tentativa ${i + 1} falhou. Retentando em ${delay}ms...`);
                        await new Promise(resolve => setTimeout(resolve, delay));
                        continue;
                    }
                    return response;
                } catch (error) {
                    if (i === maxRetries - 1) throw error;
                     const delay = Math.pow(2, i) * 800 + Math.random() * 500;
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }
            throw new Error("Falha na API após retentativas.");
        }

        // --- 2. Gemini API Logic ---

        async function generateInsight(challenge) {
            const systemPrompt = "Você é um consultor sênior de IA e Estratégia da ZC Analytics. O usuário apresentará um desafio de negócios. Sua tarefa é fornecer uma estratégia concisa (máximo 4 frases curtas), de alto impacto e tecnicamente viável usando IA/Dados para resolver o problema. Use um tom visionário, direto e profissional.";

            const payload = {
                contents: [{ parts: [{ text: `Desafio do Cliente: ${challenge}` }] }],
                tools: [{ "google_search": {} }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
                generationConfig: {
                    temperature: 0.7, // Um pouco mais criativo
                    maxOutputTokens: 250,
                }
            };

            try {
                const response = await exponentialBackoffFetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                
                if (!response.ok) throw new Error(`Erro na API: ${response.status}`);
                
                const result = await response.json();
                const candidate = result.candidates?.[0];

                if (candidate && candidate.content?.parts?.[0]?.text) {
                    const text = candidate.content.parts[0].text;
                    const groundingAttributions = candidate.groundingMetadata?.groundingAttributions || [];
                    
                    // Filtra e remove duplicatas baseado na URI
                    const uniqueSourcesMap = new Map();
                    groundingAttributions.forEach(attr => {
                        if (attr.web?.uri && attr.web?.title) {
                             uniqueSourcesMap.set(attr.web.uri, { uri: attr.web.uri, title: attr.web.title });
                        }
                    });
                    const sources = Array.from(uniqueSourcesMap.values());

                    return { text, sources };

                } else {
                     // Fallback gracioso se a IA não gerar texto
                    return { text: "Não conseguimos gerar um insight específico agora. Mas saiba que a combinação de análise preditiva e automação pode ser a chave para este desafio. Agende uma conversa para detalharmos isso.", sources: [] };
                }

            } catch (error) {
                console.error("Erro crítico na API Gemini:", error);
                throw error; // Propaga para o catch do botão
            }
        }

        // --- 3. DOM Manipulation and Event Listeners ---

        document.addEventListener('DOMContentLoaded', () => {
            lucide.createIcons();

            const challengeInput = document.getElementById('challenge-input');
            const generateBtn = document.getElementById('generate-insight-btn');
            const loadingIndicator = document.getElementById('loading-indicator');
            const resultContainer = document.getElementById('insight-result-container');
            const insightText = document.getElementById('insight-text');
            const sourceList = document.getElementById('source-list');

            // --- Scroll Reveal Logic ---
            // 1. Seleciona todos os elementos com a classe .reveal
            const revealElements = document.querySelectorAll('.reveal');

            // 2. Configura o Observador (Observer)
            const revealObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    // Se o elemento está visível na tela
                    if (entry.isIntersecting) {
                        entry.target.classList.add('active');
                        // Opcional: Parar de observar após revelar (para animar apenas uma vez)
                        observer.unobserve(entry.target);
                    }
                });
            }, {
                root: null, // Viewport
                threshold: 0.15, // Dispara quando 15% do elemento está visível
                rootMargin: "0px 0px -50px 0px" // Margem para disparar um pouco antes
            });

            // 3. Começa a observar cada elemento
            revealElements.forEach(el => revealObserver.observe(el));
            // --- End Scroll Reveal Logic ---


            if (!challengeInput || !generateBtn) return;

            challengeInput.addEventListener('input', () => {
                 // Habilita apenas se tiver conteúdo suficiente
                generateBtn.disabled = challengeInput.value.trim().length < 5;
            });
            // Estado inicial desabilitado
             generateBtn.disabled = true;

            generateBtn.addEventListener('click', async () => {
                const challenge = challengeInput.value.trim();
                if (challenge.length < 5) return;

                generateBtn.disabled = true;
                generateBtn.innerHTML = '<i data-lucide="loader-2" class="w-6 h-6 animate-spin"></i><span>Gerando...</span>';
                
                loadingIndicator.classList.remove('hidden');
                resultContainer.classList.add('hidden');
                insightText.textContent = '';
                 // Limpa fontes anteriores mantendo o cabeçalho
                Array.from(sourceList.children).forEach(child => {
                    if (child.tagName === 'A' || (child.tagName === 'P' && !child.querySelector('i'))) child.remove();
                });
                sourceList.classList.add('hidden');


                try {
                    const { text, sources } = await generateInsight(challenge);

                    insightText.innerHTML = text.replace(/\n/g, '<br>'); // Mantém quebras de linha
                    resultContainer.classList.remove('hidden');

                    if (sources.length > 0) {
                        sourceList.classList.remove('hidden');
                        sources.slice(0, 3).forEach((source, index) => {
                            const link = document.createElement('a');
                            link.href = source.uri;
                            link.target = "_blank";
                            link.rel = "noopener noreferrer";
                            link.className = "text-indigo-200 hover:text-white underline block truncate py-1 transition-colors";
                            link.innerHTML = `${index + 1}. ${source.title} <i data-lucide="external-link" class="w-3 h-3 inline ml-1 opacity-70"></i>`;
                            sourceList.appendChild(link);
                        });
                        if (sources.length > 3) {
                             const more = document.createElement('p');
                             more.textContent = `+ ${sources.length - 3} outras fontes relevantes analisadas.`;
                             more.className = "mt-2 text-xs text-indigo-400 italic";
                             sourceList.appendChild(more);
                        }
                        lucide.createIcons(); // Recria ícones novos
                    }
                     // Scroll suave até o resultado
                     resultContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });


                } catch (error) {
                    insightText.innerHTML = `<span class="text-red-300 flex items-center"><i data-lucide="alert-triangle" class="w-5 h-5 mr-2"></i>Ocorreu um erro na comunicação com a IA. Por favor, tente novamente em instantes.</span>`;
                    resultContainer.classList.remove('hidden');
                    lucide.createIcons();
                } finally {
                    loadingIndicator.classList.add('hidden');
                    generateBtn.disabled = false;
                    generateBtn.innerHTML = '<i data-lucide="wand2" class="w-6 h-6"></i><span>Gerar Estratégia com IA</span>';
                    lucide.createIcons();
                }
            });
        });
    </script>
</body>
</html>
